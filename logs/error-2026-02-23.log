{"error":"You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near '2' at line 1","level":"error","message":"Database query error:","query":"ALTER TABLE detalle_pedidos DROP FOREIGN KEY 2","service":"ezbar-api","timestamp":"2026-02-23 00:06:54"}
{"error":"Duplicate FOREIGN KEY constraint name 'detalle_pedidos_ibfk_2'","level":"error","message":"Database query error:","query":"\n        ALTER TABLE detalle_pedidos \n        ADD CONSTRAINT detalle_pedidos_ibfk_2 \n        FOREIGN","service":"ezbar-api","timestamp":"2026-02-23 00:06:54"}
{"code":"ER_FK_DUP_NAME","errno":1826,"level":"error","message":"Duplicate FOREIGN KEY constraint name 'detalle_pedidos_ibfk_2'","service":"ezbar-api","sql":"\n        ALTER TABLE detalle_pedidos \n        ADD CONSTRAINT detalle_pedidos_ibfk_2 \n        FOREIGN KEY (producto_id) \n        REFERENCES productos(producto_id) \n        ON DELETE CASCADE\n      ","sqlMessage":"Duplicate FOREIGN KEY constraint name 'detalle_pedidos_ibfk_2'","sqlState":"HY000","stack":"Error: Duplicate FOREIGN KEY constraint name 'detalle_pedidos_ibfk_2'\n    at PromisePool.query (C:\\Users\\Mig\\Desktop\\tfg\\EZBar_Backend\\Api\\api\\node_modules\\mysql2\\lib\\promise\\pool.js:36:22)\n    at pool.query (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/config/database.js:55:26)\n    at file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/app.js:35:18\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2026-02-23 00:06:54"}
{"body":{},"error":"Request failed with status code 401","ip":"127.0.0.1","level":"error","message":"Error processing GET /api/pedidos","params":{},"query":{},"service":"ezbar-api","stack":"AxiosError: Request failed with status code 401\n    at settle (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/adapters/http.js:793:11)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/Axios.js:45:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchWithRetry (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/utils/retryHelper.js:6:22)\n    at async obtenerPedidos (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/controllers/pedidosController.js:26:22)","timestamp":"2026-02-23 00:07:18"}
{"body":{},"error":"Request failed with status code 401","ip":"127.0.0.1","level":"error","message":"Error processing GET /api/pedidos","params":{},"query":{},"service":"ezbar-api","stack":"AxiosError: Request failed with status code 401\n    at settle (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/adapters/http.js:793:11)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/Axios.js:45:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchWithRetry (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/utils/retryHelper.js:6:22)\n    at async obtenerPedidos (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/controllers/pedidosController.js:26:22)","timestamp":"2026-02-23 00:07:21"}
{"body":{},"error":"Request failed with status code 401","ip":"127.0.0.1","level":"error","message":"Error processing GET /api/pedidos","params":{},"query":{},"service":"ezbar-api","stack":"AxiosError: Request failed with status code 401\n    at settle (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/adapters/http.js:793:11)\n    at IncomingMessage.emit (node:events:530:35)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/node_modules/axios/lib/core/Axios.js:45:41)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchWithRetry (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/utils/retryHelper.js:6:22)\n    at async obtenerPedidos (file:///C:/Users/Mig/Desktop/tfg/EZBar_Backend/Api/api/src/controllers/pedidosController.js:26:22)","timestamp":"2026-02-23 00:07:51"}
